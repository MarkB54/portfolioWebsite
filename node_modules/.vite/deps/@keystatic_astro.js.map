{
  "version": 3,
  "sources": ["browser-external:node:fs", "../../@keystatic/astro/dist/keystatic-astro.js"],
  "sourcesContent": ["module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"node:fs\" has been externalized for browser compatibility. Cannot access \"node:fs.${key}\" in client code. See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "import { mkdirSync, writeFileSync } from 'node:fs';\n\nfunction keystatic() {\n  return {\n    name: 'keystatic',\n    hooks: {\n      'astro:config:setup': ({\n        injectRoute,\n        updateConfig,\n        config\n      }) => {\n        updateConfig({\n          server: config.server.host ? {} : {\n            host: '127.0.0.1'\n          },\n          vite: {\n            plugins: [{\n              name: 'keystatic',\n              resolveId(id) {\n                if (id === 'virtual:keystatic-config') {\n                  return this.resolve('./keystatic.config', './a');\n                }\n                return null;\n              }\n            }],\n            optimizeDeps: {\n              entries: ['keystatic.config.*', '.astro/keystatic-imports.js']\n            }\n          }\n        });\n        const dotAstroDir = new URL('./.astro/', config.root);\n        mkdirSync(dotAstroDir, {\n          recursive: true\n        });\n        writeFileSync(new URL('keystatic-imports.js', dotAstroDir), `import \"@keystatic/astro/ui\";\nimport \"@keystatic/astro/api\";\nimport \"@keystatic/core/ui\";\n`);\n        injectRoute({\n          // @ts-ignore\n          entryPoint: '@keystatic/astro/internal/keystatic-astro-page.astro',\n          entrypoint: '@keystatic/astro/internal/keystatic-astro-page.astro',\n          pattern: '/keystatic/[...params]',\n          prerender: false\n        });\n        injectRoute({\n          // @ts-ignore\n          entryPoint: '@keystatic/astro/internal/keystatic-api.js',\n          entrypoint: '@keystatic/astro/internal/keystatic-api.js',\n          pattern: '/api/keystatic/[...params]',\n          prerender: false\n        });\n      }\n    }\n  };\n}\n\nexport { keystatic as default };\n"],
  "mappings": ";;;;;;AAAA;AAAA;AAAA,WAAO,UAAU,OAAO,OAAO,IAAI,MAAM,CAAC,GAAG;AAAA,MAC3C,IAAI,GAAG,KAAK;AACV,YACE,QAAQ,gBACR,QAAQ,eACR,QAAQ,iBACR,QAAQ,UACR;AACA,kBAAQ,KAAK,4FAA4F,GAAG,mIAAmI;AAAA,QACjP;AAAA,MACF;AAAA,IACF,CAAC,CAAC;AAAA;AAAA;;;ACXF,qBAAyC;AAEzC,SAAS,YAAY;AACnB,SAAO;AAAA,IACL,MAAM;AAAA,IACN,OAAO;AAAA,MACL,sBAAsB,CAAC;AAAA,QACrB;AAAA,QACA;AAAA,QACA;AAAA,MACF,MAAM;AACJ,qBAAa;AAAA,UACX,QAAQ,OAAO,OAAO,OAAO,CAAC,IAAI;AAAA,YAChC,MAAM;AAAA,UACR;AAAA,UACA,MAAM;AAAA,YACJ,SAAS,CAAC;AAAA,cACR,MAAM;AAAA,cACN,UAAU,IAAI;AACZ,oBAAI,OAAO,4BAA4B;AACrC,yBAAO,KAAK,QAAQ,sBAAsB,KAAK;AAAA,gBACjD;AACA,uBAAO;AAAA,cACT;AAAA,YACF,CAAC;AAAA,YACD,cAAc;AAAA,cACZ,SAAS,CAAC,sBAAsB,6BAA6B;AAAA,YAC/D;AAAA,UACF;AAAA,QACF,CAAC;AACD,cAAM,cAAc,IAAI,IAAI,aAAa,OAAO,IAAI;AACpD,sCAAU,aAAa;AAAA,UACrB,WAAW;AAAA,QACb,CAAC;AACD,0CAAc,IAAI,IAAI,wBAAwB,WAAW,GAAG;AAAA;AAAA;AAAA,CAGnE;AACO,oBAAY;AAAA;AAAA,UAEV,YAAY;AAAA,UACZ,YAAY;AAAA,UACZ,SAAS;AAAA,UACT,WAAW;AAAA,QACb,CAAC;AACD,oBAAY;AAAA;AAAA,UAEV,YAAY;AAAA,UACZ,YAAY;AAAA,UACZ,SAAS;AAAA,UACT,WAAW;AAAA,QACb,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACF;",
  "names": []
}
